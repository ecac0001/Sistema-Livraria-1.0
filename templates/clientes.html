{% extends "index.html" %}

{% block content %}
    <h1>Clientes</h1>

    <!-- Botão para exibir o formulário -->
    <button id="showFormButton" onclick="toggleForm()">Novo Cadastro</button>

    <!-- Formulário de cadastro, inicialmente oculto -->
    <form id="cadastroForm" method="POST" action="{{ url_for('clientes') }}" style="display: none; margin-top: 20px;">
        <label for="nome_completo">Nome Completo:</label>
        <input type="text" id="nome_completo" name="nome_completo" required>

        <label for="data_nascimento">Data de Nascimento:</label>
        <input type="date" id="data_nascimento" name="data_nascimento" required>

        <label for="identidade">Número de Identidade:</label>
        <input type="text" id="identidade" name="identidade" required>

        <label for="cidade">Cidade:</label>
        <input type="text" id="cidade" name="cidade" required>

        <label for="profissao">Profissão:</label>
        <input type="text" id="profissao" name="profissao" required>

        <label for="escolaridade">Escolaridade:</label>
        <select id="escolaridade" name="escolaridade" required>
            <option value="">Selecione o nível de escolaridade</option>
            <option value="Fundamental">Ensino Fundamental</option>
            <option value="Médio">Ensino Médio</option>
            <option value="Superior">Ensino Superior</option>
            <option value="Pós-graduação">Pós-graduação</option>
            <option value="Não Estudando">Não está estudando</option>
        </select>

        <button type="submit">Cadastrar Cliente</button>
    </form>

    <h2>Lista de Clientes Cadastrados</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome Completo</th>
                <th>Data de Nascimento</th>
                <th>Número de Identidade</th>
                <th>Cidade</th>
                <th>Profissão</th>
                <th>Escolaridade</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes %}
            <tr>
                <td>{{ cliente.id }}</td>
                <td>{{ cliente.nome_completo }}</td>
                <td>{{ cliente.data_nascimento }}</td>
                <td>{{ cliente.identidade }}</td>
                <td>{{ cliente.cidade }}</td>
                <td>{{ cliente.profissao }}</td>
                <td>{{ cliente.escolaridade }}</td>
                <td>
                    <!-- Botão de edição -->
                    <a href="{{ url_for('editar_cliente', id=cliente.id) }}">Editar</a>
                    
                    <!-- Formulário de exclusão -->
                    <form action="{{ url_for('deletar_cliente', id=cliente.id) }}" method="POST" style="display: inline;">
                        <button type="submit">Excluir</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Script para exibir e ocultar o formulário -->
    <script>
        function toggleForm() {
            var form = document.getElementById("cadastroForm");
            var button = document.getElementById("showFormButton");

            if (form.style.display === "none") {
                form.style.display = "block";
                button.innerText = "Cancelar Cadastro";
            } else {
                form.style.display = "none";
                button.innerText = "Novo Cadastro";
            }
        }
    </script>
{% endblock %}
